// ================================================================================
// Git Plus - Cobraルートコマンド定義
// ================================================================================
// このファイルは、Cobraコマンドフレームワークのルートコマンドを定義します。
//
// Cobraフレームワークについて:
// - Cobraは、Go言語で最も人気のあるCLIフレームワークの一つです
// - kubectl、docker、githubなど多くの有名なCLIツールで使用されています
// - サブコマンド、フラグ、引数の解析を簡単に実装できます
//
// このファイルの役割:
// - rootCmd: すべてのサブコマンドの親となるルートコマンド
// - Execute(): main.goから呼び出されるエントリーポイント
// - 各サブコマンドは init() 関数で rootCmd に登録されます
// ================================================================================
package cmd

import (
	"fmt"
	"os"

	"github.com/spf13/cobra"
)

// rootCmd は、Git Plusのルートコマンドを定義します。
// すべてのサブコマンド（newbranch, amend, squashなど）は、
// 各ファイルのinit()関数でこのrootCmdに登録されます。
//
// Cobraのコマンド構造:
// rootCmd (git-plus)
//   ├── newbranch
//   ├── amend
//   ├── squash
//   └── ...（その他のサブコマンド）
var rootCmd = &cobra.Command{
	Use:   "git-plus",
	Short: "Git の日常操作を少しだけ楽にするためのカスタムコマンド集",
	Long: `git-plus は Git の日常操作をより簡単にするためのカスタムコマンド集です。

ブランチ管理、コミット操作、PR管理、統計分析など、
様々な便利な機能を提供します。`,
}

// Execute は、Cobraのルートコマンドを実行します。
// この関数は、main.goから呼び出されるエントリーポイントです。
//
// 処理フロー:
// 1. main.go で os.Args を解析してサブコマンドを推測
// 2. cmd.Execute() を呼び出し
// 3. Cobraがサブコマンドを解析して対応するコマンドを実行
// 4. エラーが発生した場合は、標準エラー出力に表示して終了
//
// 戻り値:
// エラーが発生した場合は、終了コード1でプロセスを終了します。
func Execute() {
	// Cobraコマンドを実行
	if err := rootCmd.Execute(); err != nil {
		// エラーメッセージを標準エラー出力に表示
		fmt.Fprintln(os.Stderr, err)
		// 終了コード1でプロセスを終了
		os.Exit(1)
	}
}
